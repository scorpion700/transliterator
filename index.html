<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>–ê–≤–∞—Ä—Å–∫–∏–π —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ç–æ—Ä: –ö–∏—Ä–∏–ª–ª–∏—Ü–∞ ‚Üí –õ–∞—Ç–∏–Ω–∏—Ü–∞/–ê–¥–∂–∞–º</title>

<!-- Favicon –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><defs><linearGradient id='g' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' stop-color='%234a6fa5'/><stop offset='100%' stop-color='%233a5a8c'/></linearGradient></defs><rect width='100' height='100' rx='20' fill='url(%23g)'/><text x='50' y='72' font-family='Arial' font-size='60' font-weight='bold' text-anchor='middle' fill='white' opacity='0.9'>–ê</text></svg>">
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEYSURBVHgB7ZbBDcIwDEWTSQrDgLopDFAYprABKzALO5QNYKJ2gnIkBSd1Gv90Qv4AQa3k00mO47p8JEyW3uCBe9ICh6Qdzg1rmD+4ZhRI4Hag4g6p4oQ8vRXH5g5JV3tZ3UGBZCPvX3dxVHtU6IakJ0j1Z2wDpBoT9uLfCHgF9k7lnZ2AN0+1E2qDACd3YOvInuFsFZirfTtzAtQe1VwBWx/niDu1UoCXvUYBa++ILQF7j0q2gK23M3UBo5IEqJdNZKtm8a/7hAIxYr7CWOuPIVkDySZItT+C5GQB/XhC+WvAYCGW3zZekGQ31O8jXzQn4J8/5sAvCAAAnKXKf41S30EAAAAASUVORK5CYII=">
<link rel="icon" type="image/png" sizes="16x16" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADnSURBVHgB1ZRBCsIwEEWzI8ENuBPvIHgHwTt47yB4hzqC7sWVm2rTIE2nv8lA3AivpJ3kZ9JpkqQJTdMMXgAcOHJj2HNj3IV+NbAh1+CafMCFG/ICbnlJDuCcbMCRfIE5+SZz8kHW4CMZwC9U5OyokCM4BwfgZPoYr6SblX7C71BC3+OVdAPQzYpiCQaQmc8WU2CWf2zAMQdmyQfeNgD5qL0B9K8o0w0A8lF7A+hfUaYbAOSj9gbQv6JMNwDIR+0NIN5XFOsGAPmovQH0ryjTDQCFC9kNUN0NyQAAAABJRU5ErkJggg==">
<link rel="apple-touch-icon" sizes="180x180" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIhSURBVHgB7d2xbdRQFIXhg8QGJISvQHgCOoQJSBmKlGEIGoagYQgGhqAoBhAlBSVlKBJWYIM7n/Mk9/vk9pGObElfbN8kSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSdJkbq68Xtt/kv6T7xG8i+BDV9/iCPwcwduu3kXwuqtvEdxG8Karr13dRfC6q69d3UXwuqt7vF3/qKvv6TCCV119jeBNV/d4e72lZEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSpOl4Dvrp+DD90x2DnzX1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU1+AXzn1BfiVU19g5t/wA27o9WxMhxPBAAAAAElFTkSuQmCC">
<meta name="theme-color" content="#4a6fa5">

<style>
  * {
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  
  body {
	html {
	font-size: 16px;
	}

	body {
  font-size: clamp(14px, 3.5vw, 16px);
	}

    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    color: #333;
    line-height: 1.6;
    min-height: 100vh;
  }
  
  .header {
    text-align: center;
    margin-bottom: 30px;
    padding: 20px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }
  
  h1 {
    color: #2c3e50;
    margin-bottom: 10px;
    font-size: 2.2em;
  }
  
  .subtitle {
    color: #4a6fa5;
    font-size: 1.1em;
    margin-bottom: 5px;
  }
  
  .language-name {
    color: #e74c3c;
    font-weight: bold;
    font-size: 1.2em;
  }
  
  .converter {
    background: white;
    border-radius: 12px;
    padding: 25px;
    margin-bottom: 30px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.1);
  }
  
  .input-group {
    margin-bottom: 20px;
  }
  
  label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: #2c3e50;
  }
  
  textarea {
    width: 100%;
    padding: 15px;
    border: 2px solid #ddd;
    border-radius: 8px;
    font-size: 16px;
    resize: vertical;
    transition: all 0.3s;
    font-family: inherit;
  }
  
  textarea:focus {
    border-color: #4a6fa5;
    outline: none;
    box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.2);
  }
  
  .controls {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    align-items: center;
    margin: 20px 0;
    padding: 20px;
    background: #f8fafc;
    border-radius: 8px;
    border-left: 4px solid #4a6fa5;
  }
  
  .mode-selector {
    flex: 1;
    min-width: 200px;
  }
  
  .options {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    margin: 10px 0;
    padding: 15px;
    background: #f0f8ff;
    border-radius: 8px;
  }
  
  .option-group {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  select {
    padding: 10px 15px;
    border: 2px solid #4a6fa5;
    border-radius: 6px;
    background: white;
    font-size: 16px;
    font-weight: 500;
    width: 100%;
  }
  
  .buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }
  
  button {
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .btn-primary {
    background: linear-gradient(135deg, #4a6fa5 0%, #3a5a8c 100%);
    color: white;
  }
  
  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(58, 90, 140, 0.3);
  }
  
  .btn-secondary {
    background: #6c757d;
    color: white;
  }
  
  .btn-secondary:hover {
    background: #5a6268;
    transform: translateY(-1px);
  }
  
  .btn-success {
    background: linear-gradient(135deg, #28a745 0%, #218838 100%);
    color: white;
  }
  
  .btn-success:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(40, 167, 69, 0.3);
  }
  
  .output-container {
    margin-top: 20px;
  }
  
  .output-box {
    background: #f8f9fa;
    border: 2px solid #e9ecef;
    border-radius: 8px;
    padding: 20px;
    min-height: 120px;
    font-size: 18px;
    line-height: 1.6;
    white-space: pre-wrap;
    word-wrap: break-word;
    font-family: 'Arial Unicode MS', 'Segoe UI Symbol', sans-serif;
    direction: ltr;
  }
  
  .output-box.arabic {
    direction: rtl;
    text-align: right;
    font-family: 'Scheherazade', 'Arial', sans-serif;
    font-size: 22px;
    line-height: 2;
  }
  
  .output-title {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    flex-wrap: wrap;
    gap: 10px;
  }
  
  .stats {
    font-size: 14px;
    color: #6c757d;
  }
  
  .alphabet-table {
    margin-top: 40px;
    background: white;
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  }
  
  table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    border-radius: 8px;
    overflow: hidden;
    margin-top: 20px;
  }
  
  th {
    background: linear-gradient(135deg, #4a6fa5 0%, #3a5a8c 100%);
    color: white;
    padding: 15px;
    text-align: center;
    font-weight: 600;
    position: sticky;
    top: 0;
  }
  
  td {
    padding: 14px 15px;
    border-bottom: 1px solid #eee;
    text-align: center;
    vertical-align: middle;
  }
  
  tr:hover {
    background: #f8fafc;
  }
  
  .arabic-cell {
    font-size: 24px;
    font-family: 'Scheherazade', 'Arial', sans-serif;
    direction: rtl;
  }
  
  .note {
    background: #fff3cd;
    border-left: 4px solid #ffc107;
    border-radius: 6px;
    padding: 15px;
    margin: 20px 0;
    color: #856404;
  }
  
  .tips {
    background: #d1ecf1;
    border-left: 4px solid #0dcaf0;
    border-radius: 6px;
    padding: 15px;
    margin: 20px 0;
    color: #055160;
  }
  
  .harakat-example {
    background: #e8f5e8;
    border-left: 4px solid #28a745;
    border-radius: 6px;
    padding: 15px;
    margin: 20px 0;
    color: #155724;
    font-family: 'Scheherazade', 'Arial', sans-serif;
    font-size: 18px;
    direction: rtl;
    text-align: right;
  }
  
  .footer {
    text-align: center;
    margin-top: 40px;
    padding-top: 20px;
    border-top: 1px solid #ddd;
    color: #6c757d;
    font-size: 0.9em;
  }
  
  .sample-texts {
    margin-top: 20px;
  }
  
  .sample-btn {
    background: #e9ecef;
    border: 1px solid #dee2e6;
    color: #495057;
    padding: 8px 15px;
    border-radius: 20px;
    font-size: 14px;
    margin: 5px;
    cursor: pointer;
    transition: all 0.2s;
  }
  
  .sample-btn:hover {
    background: #dee2e6;
    transform: translateY(-1px);
  }
  
  @media (max-width: 768px) {
    body {
      padding: 10px;
    }
    
    .controls {
      flex-direction: column;
      align-items: stretch;
    }
    
    .mode-selector, .buttons {
      width: 100%;
    }
    
    .buttons {
      flex-direction: column;
    }
    
    button {
      width: 100%;
      justify-content: center;
    }
    
    table {
      display: block;
      overflow-x: auto;
    }
    
    .output-box.arabic {
      font-size: 20px;
    }
	@media (max-width: 360px) {

  h1 {
    font-size: 1.6em;
  }

  .subtitle {
    font-size: 1em;
  }

  textarea {
    font-size: 14px;
    padding: 12px;
  }

  .output-box {
    font-size: 16px;
    padding: 14px;
  }

  .output-box.arabic {
    font-size: 18px;
    line-height: 1.8;
  }

  button {
    font-size: 15px;
    padding: 12px;
  }

  .stats {
    font-size: 12px;
  }
  
  @media (min-width: 768px) and (max-width: 1024px) {

  .controls {
    flex-direction: row;
    align-items: flex-start;
  }

  .mode-selector {
    max-width: 300px;
  }

  .buttons {
    flex-direction: row;
    justify-content: flex-end;
  }

  button {
    width: auto;
  }
}

@media (max-height: 450px) and (orientation: landscape) {

  body {
    padding: 8px;
  }

  h1 {
    font-size: 1.4em;
  }

  .header {
    padding: 10px;
    margin-bottom: 15px;
  }

  textarea {
    min-height: 80px;
  }

  .controls {
    padding: 12px;
  }
}

@media (max-width: 600px) {

  table {
    font-size: 14px;
  }

  th, td {
    padding: 10px;
  }

  .arabic-cell {
    font-size: 20px;
  }
}

button,
.sample-btn {
  min-height: 44px; /* —Å—Ç–∞–Ω–¥–∞—Ä—Ç Apple/Google */
}

  
}

  }
</style>

<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Scheherazade:wght@400;700&display=swap">
</head>
<body>

<div class="header">
  <h1>–ê–≤–∞—Ä—Å–∫–∏–π —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ç–æ—Ä</h1>
  <p class="subtitle">–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –∞–≤–∞—Ä—Å–∫–æ–≥–æ –∞–ª—Ñ–∞–≤–∏—Ç–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ–≥–ª–∞—Å–æ–≤–æ–∫</p>
  <p>–ö–∏—Ä–∏–ª–ª–∏—Ü–∞ ‚Üí –õ–∞—Ç–∏–Ω–∏—Ü–∞ / –ê—Ä–∞–±—Å–∫–æ–µ –ø–∏—Å—å–º–æ (<span class="language-name">–ê–¥–∂–∞–º</span>)</p>
</div>

<div class="converter">
  <div class="input-group">
    <label for="input">–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –Ω–∞ –∞–≤–∞—Ä—Å–∫–æ–º (–∫–∏—Ä–∏–ª–ª–∏—Ü–∞):</label>
    <textarea id="input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –†–æ—Ä—á”Ä–∞–º–∏, —Ö”Ä—É—Ä–º–∞—Ç–∏—è–ª –∞–≤–∞—Ä–∞–ª!" rows="5"></textarea>
  </div>
  
  <div class="note">
    <strong>üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</strong> –î–ª—è –≤–≤–æ–¥–∞ –ø–∞–ª–æ—á–∫–∏ (”Ä) –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏–º–≤–æ–ª—ã: <code>I</code>, <code>1</code>, <code>l</code>, <code>|</code>, <code>!</code>. –û–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è.
  </div>
  
  
  <div class="controls">
    <div class="mode-selector">
      <label for="mode">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏:</label>
      <select id="mode">
        <option value="latin">–ö–∏—Ä–∏–ª–ª–∏—Ü–∞ ‚Üí –õ–∞—Ç–∏–Ω–∏—Ü–∞</option>
        <option value="adjam">–ö–∏—Ä–∏–ª–ª–∏—Ü–∞ ‚Üí –ê–¥–∂–∞–º (–∞—Ä–∞–±–∏—Ü–∞)</option>
      </select>
    </div>
    
    <div class="options" id="adjamOptions" style="display: none;">
      <div class="option-group">
        <input type="checkbox" id="harakatToggle" checked>
        <label for="harakatToggle">–î–æ–±–∞–≤–∏—Ç—å –æ–≥–ª–∞—Å–æ–≤–∫–∏ (—Ö–∞—Ä–∞–∫–∞—Ç—ã)</label>
      </div>
      <div class="option-group">
        <input type="checkbox" id="optimizeToggle" checked>
        <label for="optimizeToggle">–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–≥–ª–∞—Å–æ–≤–∫–∏</label>
      </div>
    </div>
    
    <div class="buttons">
      <button id="convert" class="btn-primary">
        <span>üîÑ</span> –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å
      </button>
      <button id="clear" class="btn-secondary">
        <span>üóëÔ∏è</span> –û—á–∏—Å—Ç–∏—Ç—å
      </button>
      <button id="copy" class="btn-success">
        <span>üìã</span> –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
      </button>
    </div>
  </div>
  
  
  <div class="output-container">
    <div class="output-title">
      <label>–†–µ–∑—É–ª—å—Ç–∞—Ç:</label>
      <div class="stats">
        <span id="charCount">0 —Å–∏–º–≤–æ–ª–æ–≤</span> ‚Ä¢ 
        <span id="conversionTime">–í—Ä–µ–º—è: 0–º—Å</span> ‚Ä¢
        <span id="harakatStatus"></span>
      </div>
    </div>
    <div class="output-box" id="output">–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç...</div>
  </div>
</div>

<div class="tips">
  <strong>üìö –°–æ–≤–µ—Ç—ã:</strong>
  <ul>
    <li>–û–≥–ª–∞—Å–æ–≤–∫–∏ (—Ö–∞—Ä–∞–∫–∞—Ç—ã) –¥–µ–ª–∞—é—Ç –∞—Ä–∞–±—Å–∫–∏–π —Ç–µ–∫—Å—Ç –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–º</li>
    <li>–°—É–∫—É–Ω (ŸÄŸí) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –ø–æ—Å–ª–µ —Å–æ–≥–ª–∞—Å–Ω–æ–π –Ω–µ—Ç –≥–ª–∞—Å–Ω–æ–π</li>
    <li>–î–ª—è –∞—Ä–∞–±—Å–∫–æ–≥–æ –ø–∏—Å—å–º–∞ —Ç–µ–∫—Å—Ç –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —Å–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ</li>
    <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä—ã —Ç–µ–∫—Å—Ç–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</li>
  </ul>
</div>

<div class="alphabet-table">
  <h2>–ê–≤–∞—Ä—Å–∫–∏–π –∞–ª—Ñ–∞–≤–∏—Ç: —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π</h2>
  <table>
    <thead>
      <tr>
        <th>–ö–∏—Ä–∏–ª–ª–∏—Ü–∞</th>
        <th>–õ–∞—Ç–∏–Ω–∏—Ü–∞</th>
        <th>–ê–¥–∂–∞–º (–∞—Ä–∞–±–∏—Ü–∞)</th>
      </tr>
    </thead>
    <tbody id="demo">
      <!-- –°–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º -->
    </tbody>
  </table>
</div>

<div class="footer">
  <p>–ê–≤–∞—Ä—Å–∫–∏–π —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ç–æ—Ä v3.0 ‚Ä¢ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–≥–ª–∞—Å–æ–≤–æ–∫ ‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Unicode</p>
  <p>–î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞—Ä–∞–±—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —à—Ä–∏—Ñ—Ç Scheherazade</p>
</div>

<script>
// ============================================================================
// –û–°–ù–û–í–ù–´–ï –ö–û–ù–°–¢–ê–ù–¢–´ –ò –§–£–ù–ö–¶–ò–ò
// ============================================================================

// –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–ª–æ—á–∫–∏
function normalizeSticks(text) {
  return text.replace(/[1lI|!]/g, "”Ä");
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
function updateStats(inputLength, conversionTime, withHarakat = false) {
  document.getElementById('charCount').textContent = `${inputLength} —Å–∏–º–≤–æ–ª–æ–≤`;
  document.getElementById('conversionTime').textContent = `–í—Ä–µ–º—è: ${conversionTime}–º—Å`;
  document.getElementById('harakatStatus').textContent = 
    withHarakat ? '–° –æ–≥–ª–∞—Å–æ–≤–∫–∞–º–∏' : '–ë–µ–∑ –æ–≥–ª–∞—Å–æ–≤–æ–∫';
}

// ============================================================================
// –ö–ê–†–¢–´ –¢–†–ê–ù–°–õ–ò–¢–ï–†–ê–¶–ò–ò
// ============================================================================

// 1. –ö–ê–†–¢–ê –î–õ–Ø –õ–ê–¢–ò–ù–ò–¶–´
const latinMap = {
  // –î–ò–ì–†–ê–§–´ (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ü–ï–†–í–´–ú–ò)
  "–ì—ä": "∆¢", "–≥—ä": "∆£",
  "–ì—å": "H", "–≥—å": "h",
  "–ì”Ä": "‚±ß", "–≥”Ä": "‚±®",
  "–ö—ä": "Q", "–∫—ä": "q",
  "–ö—å": "QÃ†", "–∫—å": "qÃ†",
  "–ö”Ä": "‚±©", "–∫”Ä": "‚±™",
  "–õ—ä": "≈Å", "–ª—ä": "≈Ç",
  "–¢”Ä": "≈¢", "—Ç”Ä": "≈£",
  "–•—ä": "”æ", "—Ö—ä": "”ø",
  "–•—å": "“≤", "—Ö—å": "“≥",
  "–•”Ä": "ƒ¶", "—Ö”Ä": "ƒß",
  "–¶”Ä": "‚±´", "—Ü”Ä": "‚±¨",
  "–ß”Ä": "√á", "—á”Ä": "√ß",
  "–õ”Ä": "ƒª", "–ª”Ä": "ƒº",
  
  // –û–°–ù–û–í–ù–´–ï –ë–£–ö–í–´
  "–ê": "A", "–∞": "a",
  "–ë": "B", "–±": "b", 
  "–í": "V", "–≤": "v",
  "–ì": "G", "–≥": "g",
  "–î": "D", "–¥": "d",
  "–ï": "Je", "–µ": "je",
  "–Å": "Jo", "—ë": "jo",
  "–ñ": "∆µ", "–∂": "∆∂",
  "–ó": "Z", "–∑": "z",
  "–ò": "I", "–∏": "i",
  "–ô": "J", "–π": "j",
  "–ö": "K", "–∫": "k",
  "–õ": "L", "–ª": "l",
  "–ú": "M", "–º": "m",
  "–ù": "N", "–Ω": "n",
  "–û": "O", "–æ": "o",
  "–ü": "P", "–ø": "p",
  "–†": "R", "—Ä": "r",
  "–°": "S", "—Å": "s",
  "–¢": "T", "—Ç": "t",
  "–£": "U", "—É": "u",
  "–§": "F", "—Ñ": "f",
  "–•": "X", "—Ö": "x",
  "–¶": "SÃµ", "—Ü": "·µ¥",
  "–ß": "C", "—á": "c",
  "–®": "≈û", "—à": "≈ü",
  "–©": "≈û≈û", "—â": "≈ü≈ü",
  "–™": "'", "—ä": "'",
  "–´": "Y", "—ã": "y",
  "–¨": "'", "—å": "'",
  "–≠": "E", "—ç": "e",
  "–Æ": "Ju", "—é": "ju",
  "–Ø": "Ja", "—è": "ja"
};

// 2. –ö–ê–†–¢–ê –î–õ–Ø –ê–î–ñ–ê–ú–ê –ë–ï–ó –û–ì–õ–ê–°–û–í–û–ö
const adjamMapSimple = {
  // –î–ò–ì–†–ê–§–´
  "–ì”Ä": "ÿπ", "–≥”Ä": "ÿπ",
  "–ö”Ä": "ŸÇ", "–∫”Ä": "ŸÇ",
  "–¢”Ä": "ÿ∑", "—Ç”Ä": "ÿ∑",
  "–¶”Ä": "ÿ≤", "—Ü”Ä": "ÿ≤",
  "–ß”Ä": "ÿ¨", "—á”Ä": "ÿ¨",
  "–•”Ä": "ÿ≠", "—Ö”Ä": "ÿ≠",
  "–ì—ä": "ÿ∫", "–≥—ä": "ÿ∫",
  "–ì—å": "Ÿá", "–≥—å": "Ÿá",
  "–ö—ä": "ŸÇ", "–∫—ä": "ŸÇ",
  "–ö—å": "ŸÉ", "–∫—å": "ŸÉ",
  "–•—ä": "ÿÆ", "—Ö—ä": "ÿÆ",
  "–•—å": "ÿ≠", "—Ö—å": "ÿ≠",
  "–õ—ä": "ŸÑ", "–ª—ä": "ŸÑ",
  "–õ”Ä": "⁄∑", "–ª”Ä": "⁄∑",
  
  // –û–î–ò–ù–û–ß–ù–´–ï –ë–£–ö–í–´
  "–ê": "ÿß", "–∞": "ÿß",
  "–ë": "ÿ®", "–±": "ÿ®",
  "–í": "Ÿà", "–≤": "Ÿà",
  "–ì": "⁄Ø", "–≥": "⁄Ø",
  "–î": "ÿØ", "–¥": "ÿØ",
  "–ï": "Ÿä", "–µ": "Ÿä",
  "–Å": "ŸäŸà", "—ë": "ŸäŸà",
  "–ñ": "ÿ¨", "–∂": "ÿ¨",
  "–ó": "ÿ≤", "–∑": "ÿ≤",
  "–ò": "ÿß", "–∏": "ÿß",
  "–ô": "Ÿä", "–π": "Ÿä",
  "–ö": "ŸÉ", "ŸÉ": "ŸÉ",
  "–õ": "ŸÑ", "ŸÑ": "ŸÑ",
  "–ú": "ŸÖ", "ŸÖ": "ŸÖ",
  "–ù": "ŸÜ", "ŸÜ": "ŸÜ",
  "–û": "Ÿà", "–æ": "Ÿà",
  "–ü": "Ÿæ", "Ÿæ": "Ÿæ",
  "–†": "ÿ±", "ÿ±": "ÿ±",
  "–°": "ÿ≥", "ÿ≥": "ÿ≥",
  "–¢": "ÿ™", "ÿ™": "ÿ™",
  "–£": "Ÿà", "—É": "Ÿà",
  "–§": "ŸÅ", "ŸÅ": "ŸÅ",
  "–•": "ÿÆ", "ÿÆ": "ÿÆ",
  "–¶": "ÿ™ÿ≥", "ÿ™ÿ≥": "ÿ™ÿ≥",
  "–ß": "⁄Ü", "⁄Ü": "⁄Ü",
  "–®": "ÿ¥", "ÿ¥": "ÿ¥",
  "–©": "ÿ¥ÿ¥", "ÿ¥ÿ¥": "ÿ¥ÿ¥",
  "–≠": "ÿß", "ÿß": "ÿß",
  "–Æ": "ŸäŸà", "ŸäŸà": "ŸäŸà",
  "–Ø": "Ÿäÿß", "Ÿäÿß": "Ÿäÿß",
  "–¨": "", "—å": "",
  "–™": "", "—ä": ""
};

// 3. –ö–ê–†–¢–ê –î–õ–Ø –ê–î–ñ–ê–ú–ê –° –û–ì–õ–ê–°–û–í–ö–ê–ú–ò
const adjamMapWithHarakat = {
  // –î–ò–ì–†–ê–§–´ –° –û–ì–õ–ê–°–û–í–ö–ê–ú–ò
  "–ì”Ä": "ÿπŸé", "–≥”Ä": "ÿπŸé",
  "–ö”Ä": "ŸÇŸè", "–∫”Ä": "ŸÇŸè",
  "–¢”Ä": "ÿ∑Ÿê", "—Ç”Ä": "ÿ∑Ÿê",
  "–¶”Ä": "ÿ≤Ÿê", "—Ü”Ä": "ÿ≤Ÿê",
  "–ß”Ä": "ÿ¨Ÿê", "—á”Ä": "ÿ¨Ÿê",
  "–•”Ä": "ÿ≠Ÿé", "—Ö”Ä": "ÿ≠Ÿé",
  "–ì—ä": "ÿ∫Ÿé", "–≥—ä": "ÿ∫Ÿé",
  "–ì—å": "ŸáŸé", "–≥—å": "ŸáŸé",
  "–ö—ä": "ŸÇŸé", "–∫—ä": "ŸÇŸé",
  "–ö—å": "ŸÉŸé", "–∫—å": "ŸÉŸé",
  "–•—ä": "ÿÆŸé", "—Ö—ä": "ÿÆŸé",
  "–•—å": "ÿ≠Ÿé", "—Ö—å": "ÿ≠Ÿé",
  "–õ—ä": "ŸÑŸé", "–ª—ä": "ŸÑŸé",
  "–õ”Ä": "⁄∑", "–ª”Ä": "⁄∑",
  
  // –ì–õ–ê–°–ù–´–ï –° –û–ì–õ–ê–°–û–í–ö–ê–ú–ò
  "–ê": "ÿßŸé", "–∞": "Ÿé",
  "–ï": "ŸäŸê", "–µ": "Ÿê",
  "–Å": "ŸäŸèŸà", "—ë": "ŸèŸà",
  "–ò": "ÿßŸê", "–∏": "Ÿê",
  "–û": "ŸàŸè", "–æ": "Ÿè",
  "–£": "ŸàŸè", "—É": "Ÿè",
  "–≠": "ÿßŸé", "—ç": "Ÿé",
  "–Æ": "ŸäŸèŸà", "—é": "ŸèŸà",
  "–Ø": "ŸäŸé", "—è": "Ÿé",
  "–´": "Ÿê", "—ã": "Ÿê",
  
  // –°–û–ì–õ–ê–°–ù–´–ï (–±–µ–∑ –æ–≥–ª–∞—Å–æ–≤–æ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  "–ë": "ÿ®", "–±": "ÿ®",
  "–í": "Ÿà", "–≤": "Ÿà",
  "–ì": "⁄Ø", "–≥": "⁄Ø",
  "–î": "ÿØ", "ÿØ": "ÿØ",
  "–ñ": "ÿ¨", "–∂": "ÿ¨",
  "–ó": "ÿ≤", "–∑": "ÿ≤",
  "–ô": "Ÿä", "–π": "Ÿä",
  "–ö": "ŸÉ", "ŸÉ": "ŸÉ",
  "–õ": "ŸÑ", "–ª": "ŸÑ",
  "–ú": "ŸÖ", "ŸÖ": "ŸÖ",
  "–ù": "ŸÜ", "ŸÜ": "ŸÜ",
  "–ü": "Ÿæ", "Ÿæ": "Ÿæ",
  "–†": "ÿ±", "ÿ±": "ÿ±",
  "–°": "ÿ≥", "ÿ≥": "ÿ≥",
  "–¢": "ÿ™", "ÿ™": "ÿ™",
  "–§": "ŸÅ", "—Ñ": "ŸÅ",
  "–•": "ÿÆ", "ÿÆ": "ÿÆ",
  "–¶": "ÿ™Ÿíÿ≥", "—Ü": "ÿ™Ÿíÿ≥",
  "–ß": "⁄Ü", "⁄Ü": "⁄Ü",
  "–®": "ÿ¥", "—à": "ÿ¥",
  "–©": "ÿ¥Ÿíÿ¥", "ÿ¥ÿ¥": "ÿ¥Ÿíÿ¥",
  
  // –ó–Ω–∞–∫–∏
  "–¨": "", "—å": "",
  "–™": "", "—ä": ""
};

// ============================================================================
// –§–£–ù–ö–¶–ò–ò –¢–†–ê–ù–°–õ–ò–¢–ï–†–ê–¶–ò–ò
// ============================================================================

// –û–±—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏
function transliterate(text, map) {
  const startTime = performance.now();
  
  // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –ø–∞–ª–æ—á–∫—É
  let normalizedText = normalizeSticks(text);
  let result = normalizedText;
  
  // –†–∞–∑–¥–µ–ª—è–µ–º –Ω–∞ –¥–∏–≥—Ä–∞—Ñ—ã –∏ –æ–¥–∏–Ω–æ—á–Ω—ã–µ
  const digraphs = [];
  const singleLetters = [];
  
  for (const key in map) {
    if (key.length >= 2) {
      digraphs.push({ 
        pattern: new RegExp(key.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g'),
        replacement: map[key],
        length: key.length
      });
    } else {
      singleLetters.push({
        pattern: new RegExp(key.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g'),
        replacement: map[key],
        length: key.length
      });
    }
  }
  
  // –°–æ—Ä—Ç–∏—Ä—É–µ–º –¥–∏–≥—Ä–∞—Ñ—ã –ø–æ –¥–ª–∏–Ω–µ (—Å–∞–º—ã–µ –¥–ª–∏–Ω–Ω—ã–µ —Å–Ω–∞—á–∞–ª–∞)
  digraphs.sort((a, b) => b.length - a.length);
  
  // 1. –ó–∞–º–µ–Ω—è–µ–º –¥–∏–≥—Ä–∞—Ñ—ã
  for (const {pattern, replacement} of digraphs) {
    result = result.replace(pattern, replacement);
  }
  
  // 2. –ó–∞–º–µ–Ω—è–µ–º –æ–¥–∏–Ω–æ—á–Ω—ã–µ –±—É–∫–≤—ã
  for (const {pattern, replacement} of singleLetters) {
    result = result.replace(pattern, replacement);
  }
  
  // 3. –£–±–∏—Ä–∞–µ–º –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –ø–∞–ª–æ—á–∫–∏
  result = result.replace(/”Ä/g, '');
  
  const endTime = performance.now();
  
  return {
    text: result,
    time: Math.round(endTime - startTime)
  };
}

// –¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è –≤ –ª–∞—Ç–∏–Ω–∏—Ü—É
function transliterateToLatin(text) {
  return transliterate(text, latinMap);
}

// –¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è –≤ –∞–¥–∂–∞–º –±–µ–∑ –æ–≥–ª–∞—Å–æ–≤–æ–∫
function transliterateToAdjamSimple(text) {
  const result = transliterate(text, adjamMapSimple);
  
  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –∞–¥–∂–∞–º–∞
  result.text = optimizeArabicText(result.text, false);
  
  return result;
}

// –¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è –≤ –∞–¥–∂–∞–º —Å –æ–≥–ª–∞—Å–æ–≤–∫–∞–º–∏
function transliterateToAdjamWithHarakat(text) {
  const result = transliterate(text, adjamMapWithHarakat);
  
  // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ–≥–ª–∞—Å–æ–≤–æ–∫
  const optimize = document.getElementById('optimizeToggle').checked;
  result.text = optimizeArabicText(result.text, true, optimize);
  
  return result;
}

// ============================================================================
// –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –ê–†–ê–ë–°–ö–û–ì–û –¢–ï–ö–°–¢–ê
// ============================================================================

function optimizeArabicText(text, withHarakat = false, optimize = true) {
  if (!withHarakat || !optimize) {
    // –ë–µ–∑ –æ–≥–ª–∞—Å–æ–≤–æ–∫ –∏–ª–∏ –±–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
    return text;
  }
  
  let result = text;
  
  // 1. –£–±–∏—Ä–∞–µ–º –æ–≥–ª–∞—Å–æ–≤–∫–∏ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–π –±—É–∫–≤—ã –ø–µ—Ä–µ–¥ –ø—Ä–æ–±–µ–ª–æ–º/–∑–Ω–∞–∫–æ–º –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è
  result = result.replace(/Ÿé(\s|[\.\?\!,ÿõ])/g, '$1');
  result = result.replace(/Ÿê(\s|[\.\?\!,ÿõ])/g, '$1');
  result = result.replace(/Ÿè(\s|[\.\?\!,ÿõ])/g, '$1');
  result = result.replace(/Ÿí(\s|[\.\?\!,ÿõ])/g, '$1');
  
  // 2. –£–±–∏—Ä–∞–µ–º –¥–≤–æ–π–Ω—ã–µ –æ–≥–ª–∞—Å–æ–≤–∫–∏
  result = result.replace(/ŸéŸé/g, 'Ÿé');
  result = result.replace(/ŸêŸê/g, 'Ÿê');
  result = result.replace(/ŸèŸè/g, 'Ÿè');
  result = result.replace(/ŸíŸí/g, 'Ÿí');
  
  // 3. –ò—Å–ø—Ä–∞–≤–ª—è–µ–º —Å–æ—á–µ—Ç–∞–Ω–∏—è –≥–ª–∞—Å–Ω—ã—Ö
  result = result.replace(/ŸéÿßŸé/g, 'Ÿéÿß');
  result = result.replace(/ŸêŸäŸê/g, 'ŸêŸä');
  result = result.replace(/ŸèŸàŸè/g, 'ŸèŸà');
  
  // 4. –£–±–∏—Ä–∞–µ–º –æ–≥–ª–∞—Å–æ–≤–∫–∏ –ø–µ—Ä–µ–¥ –¥—Ä—É–≥–∏–º —Ö–∞—Ä–∞–∫–∞—Ç–æ–º
  const harakatPattern = /([ŸéŸêŸè])([ŸéŸêŸè])/g;
  while (harakatPattern.test(result)) {
    result = result.replace(harakatPattern, '$2');
  }
  
  // 5. –î–æ–±–∞–≤–ª—è–µ–º —Å—É–∫—É–Ω –¥–ª—è —Å–æ–≥–ª–∞—Å–Ω—ã—Ö –±–µ–∑ –≥–ª–∞—Å–Ω—ã—Ö –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ —Å–ª–æ–≤–∞
  result = result.replace(/([ÿ®ÿ™ÿ´ÿ¨ÿ≠ÿÆÿØÿ∞ÿ±ÿ≤ÿ≥ÿ¥ÿµÿ∂ÿ∑ÿ∏ÿπÿ∫ŸÅŸÇŸÉŸÑŸÖŸÜŸáŸàŸä])([ÿ®ÿ™ÿ´ÿ¨ÿ≠ÿÆÿØÿ∞ÿ±ÿ≤ÿ≥ÿ¥ÿµÿ∂ÿ∑ÿ∏ÿπÿ∫ŸÅŸÇŸÉŸÑŸÖŸÜŸáŸàŸä])/g, 
    (match, p1, p2) => {
      // –ï—Å–ª–∏ –º–µ–∂–¥—É –¥–≤—É–º—è —Å–æ–≥–ª–∞—Å–Ω—ã–º–∏ –Ω–µ—Ç –æ–≥–ª–∞—Å–æ–≤–∫–∏
      if (!p1.match(/[ŸéŸêŸè]/) && !p2.match(/[ŸéŸêŸè]/)) {
        return p1 + 'Ÿí' + p2;
      }
      return match;
    });
  
  // 6. –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ –∞–ª–∏—Ñ—ã –≤ –Ω–∞—á–∞–ª–µ —Å–ª–æ–≤–∞
  result = result.replace(/^ÿßŸéŸéÿß/g, 'ÿßŸé');
  result = result.replace(/^ÿßŸêŸéÿß/g, 'ÿßŸê');
  result = result.replace(/^ÿßŸèŸéÿß/g, 'ÿßŸè');
  
  return result;
}

// ============================================================================
// –ì–ï–ù–ï–†–ê–¶–ò–Ø –¢–ê–ë–õ–ò–¶–´ –ê–õ–§–ê–í–ò–¢–ê (3 –°–¢–û–õ–ë–¶–ê)
// ============================================================================

function generateAlphabetTable() {
  const tbody = document.getElementById('demo');
  
  const alphabet = [
    { cyr: "–ê –∞", lat: "A a", adj: "ÿß" },
    { cyr: "–ë –±", lat: "B b", adj: "ÿ®" },
    { cyr: "–í –≤", lat: "V v", adj: "Ÿà" },
    { cyr: "–ì –≥", lat: "G g", adj: "⁄Ø" },
    { cyr: "–ì—ä –≥—ä", lat: "∆¢ ∆£", adj: "ÿ∫" },
    { cyr: "–ì—å –≥—å", lat: "H h", adj: "Ÿá" },
    { cyr: "–ì”Ä –≥”Ä", lat: "‚±ß ‚±®", adj: "ÿπ" },
    { cyr: "–î –¥", lat: "D d", adj: "ÿØ" },
    { cyr: "–ï –µ", lat: "Je je", adj: "Ÿä" },
    { cyr: "–Å —ë", lat: "Jo jo", adj: "ŸäŸà" },
    { cyr: "–ñ –∂", lat: "∆µ ∆∂", adj: "ÿ¨" },
    { cyr: "–ó –∑", lat: "Z z", adj: "ÿ≤" },
    { cyr: "–ò –∏", lat: "I i", adj: "ÿß" },
    { cyr: "–ô –π", lat: "J j", adj: "Ÿä" },
    { cyr: "–ö –∫", lat: "K k", adj: "ŸÉ" },
    { cyr: "–ö—ä –∫—ä", lat: "Q q", adj: "ŸÇ" },
    { cyr: "–ö—å –∫—å", lat: "QÃ† qÃ†", adj: "ŸÉ" },
    { cyr: "–ö”Ä –∫”Ä", lat: "‚±© ‚±™", adj: "ŸÇ" },
    { cyr: "–õ –ª", lat: "L l", adj: "ŸÑ" },
    { cyr: "–õ—ä –ª—ä", lat: "≈Å ≈Ç", adj: "ŸÑ" },
	{ cyr: "–õ”Ä –ª”Ä", lat: "ƒª ƒº", adj: "⁄∑"},
    { cyr: "–ú –º", lat: "M m", adj: "ŸÖ" },
    { cyr: "–ù –Ω", lat: "N n", adj: "ŸÜ" },
    { cyr: "–û –æ", lat: "O o", adj: "Ÿà" },
    { cyr: "–ü –ø", lat: "P p", adj: "Ÿæ" },
    { cyr: "–† —Ä", lat: "R r", adj: "ÿ±" },
    { cyr: "–° —Å", lat: "S s", adj: "ÿ≥" },
    { cyr: "–¢ —Ç", lat: "T t", adj: "ÿ™" },
    { cyr: "–¢”Ä —Ç”Ä", lat: "≈¢ ≈£", adj: "ÿ∑" },
    { cyr: "–£ —É", lat: "U u", adj: "Ÿà" },
    { cyr: "–§ —Ñ", lat: "F f", adj: "ŸÅ" },
    { cyr: "–• —Ö", lat: "X x", adj: "ÿÆ" },
    { cyr: "–•—ä —Ö—ä", lat: "”æ ”ø", adj: "ÿÆ" },
    { cyr: "–•—å —Ö—å", lat: "“≤ “≥", adj: "ÿ≠" },
    { cyr: "–•”Ä —Ö”Ä", lat: "ƒ¶ ƒß", adj: "ÿ≠" },
    { cyr: "–¶ —Ü", lat: "SÃµ ·µ¥", adj: "ÿ™ÿ≥" },
    { cyr: "–¶”Ä —Ü”Ä", lat: "‚±´ ‚±¨", adj: "ÿ≤" },
    { cyr: "–ß —á", lat: "C c", adj: "⁄Ü" },
    { cyr: "–ß”Ä —á”Ä", lat: "√á √ß", adj: "ÿ¨" },
    { cyr: "–® —à", lat: "≈û ≈ü", adj: "ÿ¥" },
    { cyr: "–© —â", lat: "≈ûÃµ ≈üÃµ", adj: "ÿ¥ÿ¥" },
    { cyr: "–≠ —ç", lat: "E e", adj: "ÿß" },
    { cyr: "–Æ —é", lat: "Ju ju", adj: "ŸäŸà" },
    { cyr: "–Ø —è", lat: "Ja ja", adj: "Ÿäÿß" }
  ];
  
  // –û—á–∏—â–∞–µ–º —Ç–∞–±–ª–∏—Ü—É –ø–µ—Ä–µ–¥ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º
  tbody.innerHTML = '';
  
  alphabet.forEach(letter => {
    const row = document.createElement('tr');
    
    row.innerHTML = `
      <td><strong style="font-size: 1.1em">${letter.cyr}</strong></td>
      <td style="font-family: 'Courier New', monospace">${letter.lat}</td>
      <td class="arabic-cell">${letter.adj}</td>
    `;
    
    tbody.appendChild(row);
  });
}

// ============================================================================
// –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô –ò –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
// ============================================================================

document.addEventListener('DOMContentLoaded', function() {
  // –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
  const inputEl = document.getElementById('input');
  const modeEl = document.getElementById('mode');
  const adjamOptionsEl = document.getElementById('adjamOptions');
  const convertBtn = document.getElementById('convert');
  const clearBtn = document.getElementById('clear');
  const copyBtn = document.getElementById('copy');
  const outputEl = document.getElementById('output');
  
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º –æ–ø—Ü–∏–∏ –¥–ª—è –∞–¥–∂–∞–º–∞
  function toggleAdjamOptions() {
    const isAdjam = modeEl.value === 'adjam';
    adjamOptionsEl.style.display = isAdjam ? 'flex' : 'none';
  }
  
  // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
  function convertText() {
    let text = inputEl.value.trim();
    
    if (!text) {
      outputEl.textContent = "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è...";
      outputEl.className = "output-box";
      updateStats(0, 0, false);
      return;
    }
    
    const mode = modeEl.value;
    
    if (mode === 'latin') {
      const { text: result, time } = transliterateToLatin(text);
      outputEl.textContent = result;
      outputEl.className = "output-box";
      updateStats(text.length, time, false);
      
    } else if (mode === 'adjam') {
      const useHarakat = document.getElementById('harakatToggle').checked;
      let result, time;
      
      if (useHarakat) {
        const conversion = transliterateToAdjamWithHarakat(text);
        result = conversion.text;
        time = conversion.time;
      } else {
        const conversion = transliterateToAdjamSimple(text);
        result = conversion.text;
        time = conversion.time;
      }
      
      outputEl.textContent = result;
      outputEl.className = "output-box arabic";
      updateStats(text.length, time, useHarakat);
    }
  }
  
  // –°–æ–±—ã—Ç–∏—è
  modeEl.addEventListener('change', function() {
    toggleAdjamOptions();
    if (inputEl.value.trim()) {
      convertText();
    }
  });
  
  convertBtn.addEventListener('click', convertText);
  
  document.getElementById('harakatToggle').addEventListener('change', function() {
    if (inputEl.value.trim() && modeEl.value === 'adjam') {
      convertText();
    }
  });
  
  document.getElementById('optimizeToggle').addEventListener('change', function() {
    if (inputEl.value.trim() && modeEl.value === 'adjam' && 
        document.getElementById('harakatToggle').checked) {
      convertText();
    }
  });
  
  // –ê–≤—Ç–æ–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –ø—Ä–∏ –≤–≤–æ–¥–µ
  let typingTimer;
  inputEl.addEventListener('input', function() {
    clearTimeout(typingTimer);
    
    if (this.value.trim().length > 0) {
      typingTimer = setTimeout(convertText, 500);
    } else {
      outputEl.textContent = "–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç...";
      outputEl.className = "output-box";
      updateStats(0, 0, false);
    }
  });
  
  // –û—á–∏—Å—Ç–∫–∞
  clearBtn.addEventListener('click', function() {
    inputEl.value = '';
    outputEl.textContent = '–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç...';
    outputEl.className = "output-box";
    updateStats(0, 0, false);
    inputEl.focus();
  });
  
  // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
  copyBtn.addEventListener('click', function() {
    const text = outputEl.textContent;
    
    if (!text || text.includes('–ø–æ—è–≤–∏—Ç—Å—è') || text.includes('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç')) {
      alert('–ù–µ—Ç —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è!');
      return;
    }
    
    navigator.clipboard.writeText(text).then(() => {
      const originalText = copyBtn.innerHTML;
      copyBtn.innerHTML = '<span>‚úì</span> –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
      copyBtn.style.background = 'linear-gradient(135deg, #218838 0%, #1e7e34 100%)';
      
      setTimeout(() => {
        copyBtn.innerHTML = originalText;
        copyBtn.style.background = '';
      }, 2000);
    }).catch(err => {
      console.error('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: ', err);
      alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é.');
    });
  });
  
  // –ü—Ä–∏–º–µ—Ä—ã —Ç–µ–∫—Å—Ç–æ–≤
  document.querySelectorAll('.sample-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      const sampleText = this.getAttribute('data-text');
      inputEl.value = sampleText;
      inputEl.focus();
      convertText();
    });
  });
  
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  toggleAdjamOptions();
  updateStats(0, 0, false);
  generateAlphabetTable();
  
  // –ê–≤—Ç–æ—Ñ–æ–∫—É—Å
  setTimeout(() => inputEl.focus(), 100);
});
</script>

</body>
</html>